<ion-content [fullscreen]="true">
  <ion-img class="catdog-img" src="/assets/icon/dogcat.svg"></ion-img>
  <div *ngIf="section == 1">
    <h1>Únete a la comunidad de NOApp</h1>
    <h2>Crea una cuenta gratis</h2>
  </div>
  <div *ngIf="section == 2">
    <h1>Estás a unos pasos de completar tu perfil</h1>
    <h2>Rellena esta información adicional</h2>
  </div>
  <div *ngIf="section == 3">
    <h1>Tu perfil está listo</h1>
    <h2>Pero nos gustaría saber algo antes</h2>
  </div>
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div *ngIf="section == 1">
      <app-custom-input
        icon="person-outline"
        type="text"
        label="Nombre completo"
        [control]="userForm.controls.names"
      >
      </app-custom-input>

      <app-custom-input
        icon="at-outline"
        type="text"
        label="Nombre de usuario"
        [control]="userForm.controls.username"
      >
      </app-custom-input>
      <app-custom-input
        icon="mail-outline"
        autocomplete="email"
        type="email"
        label="Correo"
        [control]="userForm.controls.email"
      >
      </app-custom-input>

      <app-custom-input
        icon="lock-closed-outline"
        autocomplete="password"
        type="password"
        label="Contraseña"
        [control]="userForm.controls.password"
      >
      </app-custom-input>
      <ion-button
        (click)="signEmail()"
        expand="block"
        [disabled]="userForm.controls.email.errors || userForm.controls.password.errors || userForm.controls.names.errors || userForm.controls.username.errors"
        >Continuar
      </ion-button>
    </div>

    <div *ngIf="section == 2">
      <app-custom-select
      openWith="gender"
      label="Genero"
      [options]="genders"
      (optionChange)="onGenderChange($event)"
      icon="transgender-outline"
      ></app-custom-select>
      <app-custom-datetime-picker
        label="Fecha de nacimiento"
        [birthday]="true"
        (datetimeChange)="onBirthDayChange($event)"
      ></app-custom-datetime-picker>
      <app-custom-input
        icon="call-outline"
        autocomplete="tel"
        type="tel"
        label="Teléfono"
        [control]="userForm.controls.phone"
      ></app-custom-input>
      <app-custom-input
        icon="home-outline"
        type="text"
        label="Dirección"
        [control]="userForm.controls.address"
      ></app-custom-input>
      <app-custom-select
      openWith="region"
      label="Región"
      [options]="regions"
      (optionChange)="onRegionChange($event)"
      icon="map-outline"
      [search]="true"
      searchLabel="Buscar Región"
      ></app-custom-select>
      <app-custom-select
      openWith="comuna"
      label="Comuna"
      [options]="filteredComunas"
      (optionChange)="onComunaChange($event)"
      icon="navigate-outline"
      [search]="true"
      searchLabel="Buscar Comuna"
      ></app-custom-select>
      <ion-button
        (click)="signPersonalInfo()"
        expand="block"
        [disabled]="userForm.controls.birthday.errors || userForm.controls.age.errors"
        >Continuar
      </ion-button>
    </div>
    <div *ngIf="section == 3">
      <app-custom-input
        icon="paw-outline"
        type="number"
        label="¿Cuantas mascotas tienes?"
        [control]="userForm.controls.pets_number"
      ></app-custom-input>
      <ion-item>
        <ion-toggle formControlName="pet_foster" ion-text="wrap"
          >¿Acojes animales temporalmente?</ion-toggle
        >
      </ion-item>
      <ion-item>
        <ion-toggle formControlName="has_vet">¿Tienes veterinaria?</ion-toggle>
      </ion-item>
      <ion-item>
        <ion-toggle formControlName="has_store"
          >¿Vendes productos para aniamles?
        </ion-toggle>
      </ion-item>
      <ion-button
        type="submit"
        expand="block"
        [disabled]="userForm.controls.pets_number.errors"
        >Terminar Registro
      </ion-button>
    </div>
  </form>
</ion-content>

